# Data Manipulation 

This section will hopefully help you get more comfortable with some of the __dplyr__ functionality for "wrangling" your data. We will do some data wrangling and the use that to create some plots. Make sure you load in the __dplyr__ package and the `movies` data set.

```{r, message = FALSE, warning=FALSE}
library(dplyr)
data("movies", package = "jrIntroduction")
```

(1) We want to look at how film budgets have changed over time for both the Comedy and non Comedy films. To start with, since there are missing values `NA` for films where we didn't know the budget, there could be complications for calculating averages and plots. We can use the `is.na()` function to find such values. Use the `filter()` function to remove them, try using the `%>%` operator notation if you like, `movies %>% filter(!is.na(...))`

    ```{r, eval = FALSE}
    movies %>%
      filter(!is.na(budget))
    ```

(1) We want to look at comedy and non comedy films in each year, this is some sort of grouping structure which suggests use of the `group_by()` function. Create this grouping structure on the filtered movies data

    ```{r, eval = FALSE}
    movies %>% 
      filter(!is.na(budget)) %>%
      group_by(year, comedy)
    ```

(1) Use `summarise()` to calculate the average budget in each year for both comedy and non comedy films.

    ```{r}
    movies %>% 
      filter(!is.na(budget)) %>%
      group_by(year, comedy) %>%
      summarise(b = mean(budget))
    ```
    
## Question 2

Run the folowing R code:

```{r, echo= TRUE}
data(USnames, package = "jrIntroduction")
```

The data frame `USnames` is a collection of names given to babies born in the US between 2011 and 2014. 

(1) Make sure you are comfortable with what the data looks like using `head()` and `colnames()`.

    ```{r}
    head(USnames)
    colnames(USnames)
    ```


(1) How many children where born in 2012? Hint: use `filter()` then `summarise()`

    ```{r}
    filter(USnames, Year == 2012) %>%  summarise(sum(Count))
    ```

(1) Were more male or females children born during the 4 years? Hint: use `group_by()`

    ```{r}
    USnames %>%
      group_by(Gender) %>%
      summarise(sum(Count))
    ## more males
    ```

(1) Tricky: How many names in 2011 were used less than 10 times?

    ```{r}
    USnames %>% 
      filter(Year == 2011 & Count < 10) %>% 
      count()
    ```
