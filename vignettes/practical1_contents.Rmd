```{r, include = FALSE, cache = FALSE}
library(knitr)
# opts_knit$set(out.format = "latex")
knit_theme$set(knit_theme$get("greyscale0"))

options(replace.assign=FALSE,width=50)

opts_chunk$set(fig.path='figure/graphics-', 
               cache.path='cache/graphics-', 
               fig.align='center', 
               dev='pdf', fig.width=5, fig.height=5, 
               fig.show='hold', cache=FALSE, par=TRUE)
knit_hooks$set(crop=hook_pdfcrop)
suppressPackageStartupMessages(library(tidyverse))
```


## Getting Started

It's a good idea to start a new R Studio project for this course. This will keep all of this work separate from any other projects you might undertake in the future and will help to keep your work nicely organised.^[RStudio allows you to quickly and easily switch between different projects so you can keep each piece of work in it's own project.]

To start a new project go to

```
  File -> New Project
```

At the pop up options I would recommend choosing

```
  New Directory -> Empty Project
```

and then choose a name and a place to save your new project.

You can find further information on using RStudio projects at their website http://www.rstudio.com/ide/docs/using/projects ^[RStudio has lots of useful documentation for lots of different topics and is a continuing useful resource as yor experience grows.]

### Start a new script file

If a new empty R script file does not open automatically when you create your project you can open a new one^[Alternatively use `ctrl + shft + n` to launch a new R script]

```
   File -> New File -> Rscript
```

Make sure that you choose the correct type of file. The RStudio IDE is clever in the way that it treats file extensions. Choosing a R script file will make sure that when you come to save your script it is saved as the correct type. It is also necessary to allow us to easily send R code from the text editor to be evaluated in the R terminal.

### Sending your first code

Let's start with sending our first piece of code to be evaluated. In the script editor (likely the top left window) write a simple piece of code, say

```{r, echo = TRUE}
x = 5
```

To send this code from the editor to be run by R you have a few options:

1. If the cursor is on the same line as the code you can either^[Both of these will only run the one line of code.]
    + Click `Run` at the top left of th e editor window
    + Press `ctrl + enter`
2. Highlight the code that you would like to run and follow the options in 1.
3. `ctrl + shft + s` sends all code from the editor to be evaluated.

`r margin_note("I tend to prefer using 'ctrl + enter' as I like using keyboard shortcuts. If you want to see all available keyboard shortcuts either go to Help and choose keyboard shortcuts, alternatively 'Alt + shft + k' is the keyboard shortcut for the keyboard shortcut menu.")`

## Course R package

Make sure that you have the course package loaded into the current session. Instructions on how to install the package are contained in the appendix to the course notes. You should only need to install a package once using `install.packages()` and then we need to use `library()` in every session or script that we want to use the functionality of that package.

```{r, echo=TRUE}
library(jrIntroduction)
```


## Vectors

Write the following code in the editor and run it

```{r, echo = TRUE}
x1 = GetNumericVector()
```

This code generates a large vector of random numbers such that everyone has the same.^[This function is part of the course package `jrIntroduction`, you can view it's help page if you like `r knitr::inline_expr('?GetNumericVector()')`]

  (1) How many elements are in `x1`? (i.e What's is the length of `x1`)
  
    ```{r, indent = '  '}
    length(x1)
    ```

  (1) What is the 55^th^ element of `x1`?

    ```{r}
    x1[55]
    ```

  (1) What is the final value in `x1`?

    ```{r}
    x1[length(x1)]
    ```
  
  (1) What is the mean value of `x1`?

    ```{r}
    mean(x1)
    ```

  (1) What is the smallest vaule of `x1`?

    ```{r}
    min(x1)
    ```
  
  (1) What is the 50^th^ smallest value of `x1`?
  
  
    ```{r}
    sort(x1)[50]
    ```

## Reading and Writing data

This section is inteded to make sure you feel happy reading and writing data into and out of R respectively.

First, load the movies data from the package

```{r, echo = TRUE}
data(movies, package = "jrIntroduction")
```

We can write this data to a file using the `write_csv()` function from the `readr` package. To use the `readr` package we must ensure that it is in use in for our current session.

```{r, echo = TRUE}
library(readr)
```

If this generates an error saying "there is no package called 'readr' " it means that the package is not already installed on your system. No problem though, we know how to install packages now

```{r, echo = TRUE, eval = FALSE}
install.packages("readr")
library(readr)
```

fixes the problem.

  (1) Write the contents of the movies data frame out to a file, you can call this file whatever you like. Once you have done so verify that it is there by using your file browser to locate it. **Don't forget the .csv file extension**^[Strictly the file extension is not needed, it is just a mechanism your computer uses to determine what program should open a certain file. It is however good practice to include the file extensions.]
    ```{r, eval = FALSE}
    write_csv(movies, "jumpingrivers.csv")
    ```

  (1) Make sure that you can read the data back in, when you do assign it to a variable called `d`
    ```{r, eval = FALSE}
    d = read_csv("jumpingrivers.csv")
    ```

  (1) The package also contains an Excel version of the movies data. The motivation behind this question is that in the past a number of participants have been interested in how to export their data from an excel file they already have and import it into R. Running the code below should copy the excel file to your current working directory.^[The working directory is the default directory for reading and writing files from R. You can see what it is using `getwd()` and change it using `setwd()` passing a new directory path as an argument. Alternatively go to the Session tab of RStudio to change it.]
    ```{r, echo = TRUE, eval = FALSE}
    GetExcelMovies()
    ```
  (a) If you have succesfully copied the file, open it using Excel.
  (a) You should be able to save this spreadsheet as a csv by either
    ```
      File -> Save As
    ```
    and choosing .csv (Comma Seperated Value) as the file type or
    ```
      File -> Export
    ```
    export as csv depending on which version of Excel you are running.
  (a) Once you have done this make sure that you can then read it in using `read_csv()`

## Data frames and tibbles

```{r, echo = FALSE}
d = as_tibble(movies)
```

For this section we will be using some of the functions from the `dplyr` package. Since we are starting to use more of the packages that are included in the "tidyverse" it makes sense to just install them all now.

```{r, echo=TRUE, eval = FALSE}
install.packages("tidyverse") # install once
library("tidyverse") # library each time we want to use them
```

You should already have the `movies` data frame loaded from the package. You should also have another copy of that data called `d` from the reading and writing exercises. You should be able to see that they are in the session under the environment tab (as well as any other variables you have defined in the session).

You could print out the data to inspect it by typing its variable name^[You could also use `View(movies)` which will open it in the editor with similar formatting to a spread sheet. This is not editable however.]

```{r, echo = TRUE, eval = FALSE}
movies
```

(1) When we read data in using the `read_csv()` function we get a tibble version of that data frame. What is the difference if you print out the contents of `d`?

    ```{r}
    ## d has a much tidier print method, showing the top few rows and the types of data in each column. 
    ## It keeps everything on screen
    ```

(1) Likewise we can observe the differences between the data frame `movies` and the tibble `d` when we try to pull out an individual column. Try pulling out the `Year` column using both the `$Year` notation and the `[,2]` notation. What are the differences between `movies` and `d` for these two operations?

    ```{r, eval = FALSE}
    movies$Year
    d$Year
    
    ## give the same thing, a vector
    ```

    ```{r, eval = FALSE}
    movies[,2]
    d[,2]
    
    ## with the tibble we get back another tibble, (2 dimensional)
    ## with the data frame we get a vector (1 dimensional)
    ```

(1) Using `mean()` and `median()` calculate these summary statistics for the film lengths

    ```{r}
    # either
    mean(movies$Length)
    median(movies$Length)
    # or
    summarise(movies, mean(Length), median(Length))
    # Either is fine, but from now on in the solutions I will use the dplyr option with the tibble d
    ```
    
(1) How many Action films are there in the data? (There is a 1 in the action column if it is an action film)

    ```{r}
    count(d,Action)
    ```

(1) You can use both `count()` and `table()` on more than one column at once by just adding extra columns as arguments. For example `count(d,mpaa,Action)` would tell me how many action and non action films there are for each of the mpaa ratings. How many romantic comedy films are there? i.e a 1 in the Romance column and a 1 in the Comedy column?

    ```{r}
    count(d,Romance,Comedy)
    ```

(1) What year is the oldest film in the data set from?

    ```{r}
    summarise(d,min(Year))
    ```

(1) How long is the longest film?

    ```{r}
    summarise(d,max(Length))
    ```

(1) What is the standard deviation of the film ratings?

    ```{r}
    summarise(d, sd(Rating))
    ```

(1) How many people cast their vote on a film on average?

    ```{r}
    summarise(d,mean(Votes))
    ```

## Solutions

Solutions to the practical questions are contained within in the package

```{r, eval= FALSE, echo = TRUE}
vignette("solutions1", package = "jrIntroduction")
```
